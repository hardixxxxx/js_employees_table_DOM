function t(t){return`$${Number(t).toLocaleString("en-US")}`}class e{notification=null;#t(t=""){let e=document.createElement("div");return e.classList.add(t,"notification"),e.setAttribute("data-qa","notification"),this.notification=e,this}#e(t){let e=document.createElement("h2");return e.classList.add("title"),e.textContent=t,this.notification.append(e),this}#a(t){let e=document.createElement("p");return e.textContent=t,this.notification.append(e),this}#n(){return document.body.append(this.notification),this}#r(){let t=setTimeout(()=>{this.notification.style.display="none",clearTimeout(t)},2e3)}showNotification({type:t,title:e,message:a}){this.#t(t).#e(e).#a(a).#n().#r()}}class a{static OFFICES=["Tokyo","Singapore","London","New York","Edinburgh","San Francisco"];static #i(){let t=document.createElement("button");return t.setAttribute("type","submit"),t.textContent="Save to table",t}static #o(t,e={}){let a=document.createElement("input");return a.setAttribute("name",t),a.setAttribute("data-qa",t),a.setAttribute("required",!0),Object.entries(e).forEach(([t,e])=>{a.setAttribute(t,e)}),a}static #s(t,e,n){let r=document.createElement("label"),i=a.#o(t,n);return r.textContent=e,r.append(i),r}static #l(t){let e=document.createElement("option");return e.textContent=t,e.setAttribute("value",t),e}static #c(t){let e=document.createElement("select");return e.setAttribute("name",t),e.setAttribute("data-qa",t),a.OFFICES.forEach(t=>{let n=a.#l(t);e.append(n)}),e}static #u(t,e){let n=document.createElement("label"),r=a.#c(t);return n.textContent=e,n.append(r),n}static #d(t){let e=this.#s("name","Name:",{minlength:4}),a=this.#s("position","Position:"),n=this.#u("office","Office:"),r=this.#s("age","Age:",{type:"number",max:90,min:18}),i=this.#s("salary","Salary:",{type:"number"}),o=this.#i();return t.append(e),t.append(a),t.append(n),t.append(r),t.append(i),t.append(o),t}static #p(t){let a=new e;for(let[e,n]of t.entries()){if(!n)return a.showNotification({type:"error",title:"Error",message:`${function(t){if(t)return"string"!=typeof t?t:t.charAt(0).toLocaleUpperCase()+t.slice(1)}(e)} field is required`}),!1;if("name"===e&&n.length<4)return a.showNotification({type:"error",title:"Error",message:"Name length should be at least 4 characters."}),!1;if("age"===e&&(n<18||n>90))return a.showNotification({type:"error",title:"Error",message:"Age should be at least 18 y.o. and less or equal than 90"}),!1}return!0}static #m(t){t.preventDefault();let n=new FormData(t.target);a.#p(n)&&(a.#b(n),t.target.reset(),new e().showNotification({type:"success",title:"Success",message:"Employee has been added."}))}static #b(e){let a=document.querySelector("tbody"),n=document.createElement("tr");for(let[r,i]of e.entries()){let e=i,o=document.createElement("td");"salary"===r&&(e=t(i)),o.append(e),n.append(o),a.append(n)}}createForm(){let t=document.createElement("form");return t.classList.add("new-employee-form"),t.setAttribute("novalidate",!0),t.addEventListener("submit",a.#m),a.#d(t)}}class n{static #o(t){let e=document.createElement("input");return e.classList.add("cell-input"),("age"===t||"salary"===t)&&e.setAttribute("type","number"),e}static #f(e,a,n){let{target:r}=e,{parentNode:i,value:o}=r,s=o;"salary"===a&&(s=o?t(o):null),r.remove(),i.textContent=s??n}editCell(t,e){let{target:a}=t,r=a.cellIndex,i=e.rows[0].cells[r].textContent.toLowerCase(),o=a.textContent,s=n.#o(i);s.setAttribute("placeholder",o),a.textContent=null,a.append(s),s.focus(),s.addEventListener("keypress",t=>{"Enter"===t.key&&s.blur()}),s.addEventListener("blur",t=>{n.#f(t,i,o)})}}class r{static #h(t,e){let a=e.cells[t].textContent;return 3===t&&(a=+a),4===t&&(a=+a.replace(/[$,]/g,"")),a}static #y(t,e){for(let a=0;a<e.length;a++)t!==a&&e[a].removeAttribute("data-sort")}static #E(t,e){let a=e[t].getAttribute("data-sort"),n=null;return r.#y(t,e),n=a&&"desc"!==a?"desc":"asc",e[t].setAttribute("data-sort",n),n}onTableSort(t,e,a){let n=a.cellIndex,i=t.rows[0].cells,o=e.rows,s=r.#E(n,i);[...o].sort((t,e)=>{let a=r.#h(n,t),i=r.#h(n,e);return"string"==typeof a?a.localeCompare(i):a-i}).forEach(t=>{"asc"===s?e.append(t):e.prepend(t)})}}const i=document.querySelector("thead"),o=document.querySelector("tbody"),{onTableSort:s}=new r,{createForm:l}=new a,{editCell:c}=new n;i.addEventListener("click",t=>s(i,o,t.target)),o.addEventListener("click",t=>{var e;return e=t.target,void([...o.rows].forEach(t=>t.classList.remove("active")),e.closest("tr").classList.add("active"))}),o.addEventListener("dblclick",t=>c(t,i)),document.body.append(l());
//# sourceMappingURL=index.3116c265.js.map
